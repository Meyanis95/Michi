{"ast":null,"code":"var _jsxFileName = \"/Users/tche/Documents/code/michi/Michi/front/src/view/course.js\",\n    _s = $RefreshSig$();\n\nimport '../form.css';\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport env from 'react-dotenv';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar CryptoJS = require('crypto-js');\n\nconst FormData = require('form-data');\n\nexport default function Course() {\n  _s();\n\n  const [selectedVideoFile, setSelectedVideoFile] = useState(null);\n  const [selectedImageFile, setSelectedImageFile] = useState(null);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [content, setContent] = useState('');\n\n  const onVideoChange = event => {\n    setSelectedVideoFile(event.target.files[0]);\n  };\n\n  const onTitleChange = event => {\n    setTitle(event.target.value);\n  };\n\n  const onImageChange = event => {\n    setSelectedImageFile(event.target.files[0]);\n  };\n\n  const onDescriptionChange = event => {\n    setDescription(event.target.value);\n  };\n\n  const onContentChange = event => {\n    setContent(event.target.value);\n  };\n\n  const onFileUpload = () => {\n    const pinVideoFileToIPFS = async (pinataApiKey, pinataSecretApiKey) => {\n      const url = `https://api.pinata.cloud/pinning/pinFileToIPFS`;\n      let data = new FormData();\n      data.append('file', selectedVideoFile);\n      const metadata = JSON.stringify({\n        name: title,\n        description: description,\n        content: content\n      });\n      data.append('pinataMetadata', metadata);\n      const pinataOptions = JSON.stringify({\n        cidVersion: 0,\n        customPinPolicy: {\n          regions: [{\n            id: 'FRA1',\n            desiredReplicationCount: 1\n          }, {\n            id: 'NYC1',\n            desiredReplicationCount: 2\n          }]\n        }\n      });\n      data.append('pinataOptions', pinataOptions);\n      const result = axios.post(url, data, {\n        maxBodyLength: 'Infinity',\n        //this is needed to prevent axios from erroring out with large files\n        headers: {\n          'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n          pinata_api_key: pinataApiKey,\n          pinata_secret_api_key: pinataSecretApiKey\n        }\n      }).then(function (response) {\n        console.log(response);\n        return 'https://ipfs.io/ipfs/' + response.data.IpfsHash;\n      }).catch(function (error) {\n        console.log(error);\n      });\n      return result;\n    };\n\n    const pinImageFileToIPFS = async (pinataApiKey, pinataSecretApiKey) => {\n      const url = `https://api.pinata.cloud/pinning/pinFileToIPFS`;\n      let data = new FormData();\n      data.append('file', selectedImageFile);\n      const metadata = JSON.stringify({\n        name: title,\n        description: description,\n        content: content\n      });\n      data.append('pinataMetadata', metadata);\n      const pinataOptions = JSON.stringify({\n        cidVersion: 0,\n        customPinPolicy: {\n          regions: [{\n            id: 'FRA1',\n            desiredReplicationCount: 1\n          }, {\n            id: 'NYC1',\n            desiredReplicationCount: 2\n          }]\n        }\n      });\n      data.append('pinataOptions', pinataOptions);\n      const result = axios.post(url, data, {\n        maxBodyLength: 'Infinity',\n        //this is needed to prevent axios from erroring out with large files\n        headers: {\n          'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n          pinata_api_key: pinataApiKey,\n          pinata_secret_api_key: pinataSecretApiKey\n        }\n      }).then(function (response) {\n        console.log(response);\n        return 'https://ipfs.io/ipfs/' + response.data.IpfsHash;\n      }).catch(function (error) {\n        console.log(error);\n      });\n      return result;\n    };\n\n    const pinJSONToIPFS = (pinataApiKey, pinataSecretApiKey, JSONBody) => {\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`;\n      return axios.post(url, JSONBody, {\n        headers: {\n          pinata_api_key: pinataApiKey,\n          pinata_secret_api_key: pinataSecretApiKey\n        }\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {//handle error here\n      });\n    };\n\n    async function main() {\n      const ipfsVideoUrl = await pinVideoFileToIPFS(env.PINATA_KEY, env.PINATA_SECRET_KEY);\n      const ipfsImageUrl = await pinImageFileToIPFS(env.PINATA_KEY, env.PINATA_SECRET_KEY);\n      const dataJson = {\n        ipfs_video_url: ipfsVideoUrl,\n        ipfs_backgroung_url: ipfsImageUrl,\n        metadata: {\n          title: title,\n          description: description,\n          content: content\n        }\n      };\n      var ciphertext = CryptoJS.AES.encrypt(JSON.stringify(dataJson), 'secret key 123').toString();\n      console.log(ciphertext);\n      pinJSONToIPFS(env.PINATA_KEY, env.PINATA_SECRET_KEY, ciphertext);\n    }\n\n    main();\n  };\n\n  const fileData = () => {\n    if (selectedVideoFile) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"File Details:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"File Name: \", selectedVideoFile.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"File Type: \", selectedVideoFile.type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Last Modified: \", selectedVideoFile.lastModifiedDate.toDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Choose before Pressing the Upload button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Web3 Udemy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Create your first course!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: title,\n        onChange: onTitleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Upload your video content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: onVideoChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: description,\n        onChange: onDescriptionChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Upload a background image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: onImageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"textarea\",\n        type: \"textarea\",\n        value: content,\n        onChange: onContentChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onFileUpload,\n        children: \"Upload!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), fileData()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Course, \"HMVxBTrYDsNpvZykgUU1pSeNSg0=\");\n\n_c = Course;\n\nvar _c;\n\n$RefreshReg$(_c, \"Course\");","map":{"version":3,"sources":["/Users/tche/Documents/code/michi/Michi/front/src/view/course.js"],"names":["axios","React","useState","env","CryptoJS","require","FormData","Course","selectedVideoFile","setSelectedVideoFile","selectedImageFile","setSelectedImageFile","title","setTitle","description","setDescription","content","setContent","onVideoChange","event","target","files","onTitleChange","value","onImageChange","onDescriptionChange","onContentChange","onFileUpload","pinVideoFileToIPFS","pinataApiKey","pinataSecretApiKey","url","data","append","metadata","JSON","stringify","name","pinataOptions","cidVersion","customPinPolicy","regions","id","desiredReplicationCount","result","post","maxBodyLength","headers","_boundary","pinata_api_key","pinata_secret_api_key","then","response","console","log","IpfsHash","catch","error","pinImageFileToIPFS","pinJSONToIPFS","JSONBody","main","ipfsVideoUrl","PINATA_KEY","PINATA_SECRET_KEY","ipfsImageUrl","dataJson","ipfs_video_url","ipfs_backgroung_url","ciphertext","AES","encrypt","toString","fileData","type","lastModifiedDate","toDateString"],"mappings":"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","sourcesContent":["import '../form.css';\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport env from 'react-dotenv';\nvar CryptoJS = require('crypto-js');\nconst FormData = require('form-data');\n\nexport default function Course() {\n  const [selectedVideoFile, setSelectedVideoFile] = useState(null);\n  const [selectedImageFile, setSelectedImageFile] = useState(null);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [content, setContent] = useState('');\n\n  const onVideoChange = (event) => {\n    setSelectedVideoFile(event.target.files[0]);\n  };\n\n  const onTitleChange = (event) => {\n    setTitle(event.target.value);\n  };\n\n  const onImageChange = (event) => {\n    setSelectedImageFile(event.target.files[0]);\n  };\n\n  const onDescriptionChange = (event) => {\n    setDescription(event.target.value);\n  };\n\n  const onContentChange = (event) => {\n    setContent(event.target.value);\n  };\n\n  const onFileUpload = () => {\n    const pinVideoFileToIPFS = async (pinataApiKey, pinataSecretApiKey) => {\n      const url = `https://api.pinata.cloud/pinning/pinFileToIPFS`;\n      let data = new FormData();\n      data.append('file', selectedVideoFile);\n\n      const metadata = JSON.stringify({\n        name: title,\n        description: description,\n        content: content,\n      });\n      data.append('pinataMetadata', metadata);\n\n      const pinataOptions = JSON.stringify({\n        cidVersion: 0,\n        customPinPolicy: {\n          regions: [\n            {\n              id: 'FRA1',\n              desiredReplicationCount: 1,\n            },\n            {\n              id: 'NYC1',\n              desiredReplicationCount: 2,\n            },\n          ],\n        },\n      });\n      data.append('pinataOptions', pinataOptions);\n\n      const result = axios\n        .post(url, data, {\n          maxBodyLength: 'Infinity', //this is needed to prevent axios from erroring out with large files\n          headers: {\n            'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n            pinata_api_key: pinataApiKey,\n            pinata_secret_api_key: pinataSecretApiKey,\n          },\n        })\n        .then(function (response) {\n          console.log(response);\n          return 'https://ipfs.io/ipfs/' + response.data.IpfsHash;\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n\n      return result;\n    };\n\n    const pinImageFileToIPFS = async (pinataApiKey, pinataSecretApiKey) => {\n      const url = `https://api.pinata.cloud/pinning/pinFileToIPFS`;\n      let data = new FormData();\n      data.append('file', selectedImageFile);\n\n      const metadata = JSON.stringify({\n        name: title,\n        description: description,\n        content: content,\n      });\n      data.append('pinataMetadata', metadata);\n\n      const pinataOptions = JSON.stringify({\n        cidVersion: 0,\n        customPinPolicy: {\n          regions: [\n            {\n              id: 'FRA1',\n              desiredReplicationCount: 1,\n            },\n            {\n              id: 'NYC1',\n              desiredReplicationCount: 2,\n            },\n          ],\n        },\n      });\n      data.append('pinataOptions', pinataOptions);\n\n      const result = axios\n        .post(url, data, {\n          maxBodyLength: 'Infinity', //this is needed to prevent axios from erroring out with large files\n          headers: {\n            'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n            pinata_api_key: pinataApiKey,\n            pinata_secret_api_key: pinataSecretApiKey,\n          },\n        })\n        .then(function (response) {\n          console.log(response);\n          return 'https://ipfs.io/ipfs/' + response.data.IpfsHash;\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n\n      return result;\n    };\n\n    const pinJSONToIPFS = (pinataApiKey, pinataSecretApiKey, JSONBody) => {\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`;\n      return axios\n        .post(url, JSONBody, {\n          headers: {\n            pinata_api_key: pinataApiKey,\n            pinata_secret_api_key: pinataSecretApiKey,\n          },\n        })\n        .then(function (response) {\n          console.log(response);\n        })\n        .catch(function (error) {\n          //handle error here\n        });\n    };\n\n    async function main() {\n      const ipfsVideoUrl = await pinVideoFileToIPFS(\n        env.PINATA_KEY,\n        env.PINATA_SECRET_KEY\n      );\n      const ipfsImageUrl = await pinImageFileToIPFS(\n        env.PINATA_KEY,\n        env.PINATA_SECRET_KEY\n      );\n      const dataJson = {\n        ipfs_video_url: ipfsVideoUrl,\n        ipfs_backgroung_url: ipfsImageUrl,\n        metadata: {\n          title: title,\n          description: description,\n          content: content,\n        },\n      };\n      var ciphertext = CryptoJS.AES.encrypt(\n        JSON.stringify(dataJson),\n        'secret key 123'\n      ).toString();\n      console.log(ciphertext);\n      pinJSONToIPFS(env.PINATA_KEY, env.PINATA_SECRET_KEY, ciphertext);\n    }\n\n    main();\n  };\n\n  const fileData = () => {\n    if (selectedVideoFile) {\n      return (\n        <div>\n          <h2>File Details:</h2>\n\n          <p>File Name: {selectedVideoFile.name}</p>\n\n          <p>File Type: {selectedVideoFile.type}</p>\n\n          <p>\n            Last Modified: {selectedVideoFile.lastModifiedDate.toDateString()}\n          </p>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <br />\n          <h4>Choose before Pressing the Upload button</h4>\n        </div>\n      );\n    }\n  };\n\n  return (\n    <div>\n      <h1>Web3 Udemy</h1>\n      <h3>Create your first course!</h3>\n      <div>\n        <label>Title</label>\n        <input type=\"text\" value={title} onChange={onTitleChange}></input>\n        <label>Upload your video content</label>\n        <input type=\"file\" onChange={onVideoChange} />\n        <label>Description</label>\n        <input\n          type=\"text\"\n          value={description}\n          onChange={onDescriptionChange}\n        ></input>\n        <label>Upload a background image</label>\n        <input type=\"file\" onChange={onImageChange} />\n        <label>Content</label>\n        <input\n          id=\"textarea\"\n          type=\"textarea\"\n          value={content}\n          onChange={onContentChange}\n        ></input>\n        <br />\n        <button onClick={onFileUpload}>Upload!</button>\n      </div>\n      {fileData()}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}